!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(self,(function(){return(()=>{"use strict";var __webpack_modules__={334:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=void 0;var Component=function(){function Component(e,t,n){var o=this;void 0===t&&(t=""),void 0===n&&(n=[]),this.selector=e,this.template=t,this.row=0,this.components=[],this.selector=e,this.template=t,n.forEach((function(e){return o.attach(e)})),window.document.createElement(this.selector)}return Component.prototype.emit=function(e){var t=null;return this[e]&&(t=this[e]()),this.components.forEach((function(n){return!1===t?n.emit(e):t=n.emit(e)})),t},Component.prototype.attach=function(e){var t=e.selector.split("[")[0];if(-1!==this.components.indexOf(e))throw new ReferenceError("Can't attach \""+t+'": is already attached');var n="data-"+this.selector.split(" ").pop().split("[")[0],o=n+'="'+this.row+'"',r=new RegExp("<"+t+"*(.(?!"+n+"))+><").exec(this.template);if(r){var i=r[0].substring(0,r[0].length-2);this.template=this.template.replace(i+">",i+" "+o+">")}else e.emit("onInit"),this.template+="<"+t+" "+o+"></"+t+">";return this.components.push(e),this.row+=1,e.selector=t+"["+o+"]",this},Component.prototype.detach=function(e){var t=this.components.indexOf(e),n=e.selector.split("[");if(-1===t||1===n.length)throw new ReferenceError("Can't detach \""+e.selector+'": is not attached');var o=n[n.length-2].split(" "),r=o[o.length-1],i=""+n[n.length-1].replace("]",""),a=new RegExp("<"+r+"+(.)+"+i+"+><").exec(this.template);return this.template=this.template.replace(a[0]+"/"+r+">",""),this.components.splice(t,1),this.row-=1,e.emit("onDestroy"),e.selector=""+r,this},Component.prototype.update=function(){var _this=this,vars="",element=window.document.querySelector(this.selector);if(!element)return console.info('No update for "'+this.selector+'": not found in the document'),this;var properties=window.Object.getOwnPropertyNames(this).slice(4).concat(window.Object.getOwnPropertyNames(this.constructor.prototype).slice(1));return["onInit","onUpdate","onDestroy","onBack","onPause","onResume"].forEach((function(e){var t=properties.indexOf(e);-1!==t&&properties.splice(t,1)})),properties.forEach((function(e){vars+="var "+e+' = this["'+e+'"]',_this[e]instanceof window.Function&&(vars+=".bind(this)"),vars+=";"})),element.innerHTML=eval(vars+"`"+this.template+"`"),this.updateEvents(element,properties),this.components.forEach((function(e){-1===e.selector.indexOf(_this.selector)&&(e.selector=_this.selector+" "+e.selector),e.update()})),this.onUpdate&&this.onUpdate(element),this},Component.prototype.updateEvents=function(e,t){var n,o=this;return t.forEach((function(t){var r=new window.RegExp('(on[a-zA-Z]{4,16})="'+t+'\\((.*)\\)"',"g"),i=function(e){return o.registerEvent(e,n[1],t,n[2].split(", "))};do{(n=r.exec(e.innerHTML))&&window.document.querySelectorAll(o.selector+" ["+n[0]+"]").forEach(i)}while(n)})),this},Component.prototype.registerEvent=function(htmlElement,type,propertie,args){var _this=this;return htmlElement[type]=function(){var _a,evaluedArguments=[];for(var key in args)evaluedArguments[key]=eval(args[key]);void 0!==(_a=_this)[propertie].apply(_a,evaluedArguments)&&_this.update()},this},Component}();exports.Component=Component},792:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RouterComponent=void 0;var i,a=n(334),c=n(410),p=n(435),s="";t.RouterComponent=new(function(e){function t(){var t=e.call(this,"router")||this,n=window.document.getElementsByTagName("script");return Object.keys(n).some((function(e){var t=n[parseInt(e)];return!(!t.src||-1===t.src.indexOf("dist/appable.js")||(s=t.src.replace("/dist/appable.js","").replace(window.location.origin,""),0))})),t}return r(t,e),t.prototype.add=function(e,t,n){return c.RouteService.post(""+s+e,t,n),this},t.prototype.run=function(e){var t,n=this;window.addEventListener("popstate",(function(e){return n.onPopstate(e)})),window.document.addEventListener("pause",(function(){return n.emit("onPause")})),window.document.addEventListener("resume",(function(){return function(){return n.emit("onResume")}}));var o=c.RouteService.get();try{if(o.forEach((function(e){if(c.RouteService.matchLocation(e))throw e;try{t=c.RouteService.getParam(e)}catch(e){}if(t)throw e})),o.length&&!c.RouteService.hasParam(o[0]))throw o[0]}catch(e){p.StateService.put(e,t),this.attachRoute(e)}return e.attach(this),e.update(),this},t.prototype.back=function(){return window.history.back(),this},t.prototype.navigate=function(e,t){try{c.RouteService.get().forEach((function(t){if(e===t.name)throw t}))}catch(e){if(0<this.components.length){if(this.components[0]===e.component)return;this.detach(this.components[0])}return p.StateService.post(e,t),this.attachRoute(e),void this.update()}throw new ReferenceError('Route "'+e+'" not found')},t.prototype.get=function(e){if(!e)return i;var t=p.StateService.get().param[""+e];if(!t)throw new ReferenceError('There is no param "'+e+'" in the curent state');return t},t.prototype.attachRoute=function(e){if(e.component instanceof window.Function){var t=e.component;e.component=new t}return i=e,this.attach(e.component)},t.prototype.onPopstate=function(e){var t=this;if(!1===this.emit("onBack")){var n=p.StateService.get();return c.RouteService.get().some((function(e){return e.name===n.name&&(p.StateService.post(e,n.param),!0)})),!1}return this.detach(this.components[0]),e.state&&c.RouteService.get().some((function(n){return e.state.name===n.name&&(p.StateService.put(n,e.state.param),t.attachRoute(n),!0)})),this.update(),!0},t.prototype.updateEvents=function(){return this},t}(a.Component))},459:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Route=void 0;t.Route=function(e,t,n){this.path=e,this.name=t,this.component=n}},469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;t.State=function(){}},410:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RouteService=void 0;var i=n(122),a=[];t.RouteService=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.get=function(){return a},t.prototype.post=function(e,t,n){a.forEach((function(n){if(e===n.path)throw new ReferenceError("Can't add route: path \""+e+'" already exists');if(t===n.name)throw new ReferenceError("Can't add route: name \""+t+'" already exists')})),a.push({path:e,name:t,component:n})},t.prototype.matchLocation=function(e){return!this.hasParam(e)&&e.path===window.location.pathname},t.prototype.hasParam=function(e){return-1!==e.path.indexOf(":")},t.prototype.getParam=function(e){var t={},n=window.location.pathname.split("/"),o=e.path.split("/");if(n.length!==o.length)throw new Error("Location path length is different to route path length");return Object.keys(n).forEach((function(e){var r=o[e],i=n[e];if(":"===r[0])t[r.replace(":","")]=i;else if(i!==r)throw new Error('Route part "'+r+'" not found')})),Object.keys(t).forEach((function(e){if(":"+e===t[e])throw new Error('Route slug "'+e+'" is not populated')})),t},t}(i.Service))},122:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Service=void 0;var n=[],o=function(){function e(){}return e.prototype.attach=function(e){return n.push(e),this},e.prototype.detach=function(e){var t=n.indexOf(e);return-1!==t&&n.splice(t,1),this},e.prototype.notify=function(){var e=this;return n.forEach((function(t){return t(e)})),this},e}();t.Service=o},435:function(e,t,n){var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.StateService=void 0;var i=n(122),a=new(n(469).State);t.StateService=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.get=function(){return a},t.prototype.post=function(e,t){return this.history(e,t)},t.prototype.put=function(e,t){return this.history(e,t,!0)},t.prototype.history=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1),e.path.split("/").forEach((function(e){if(":"===e[0]&&void 0===t[e.substring(1)])throw new Error('Slug "'+e+'" is missing in param')})),Object.keys(t).forEach((function(t){if(-1===e.path.indexOf(":"+t))throw new Error('Param "'+t+'" is missing in "'+e.path+'"')}));var o=e.path;return a.name=e.name,a.param=t,Object.keys(a.param).forEach((function(e){return o=o.replace(":"+e,""+a.param[e])})),n?(window.history.replaceState(a,e.name,o),this.notify(),!1):(window.history.pushState(a,e.name,o),this.notify(),!0)},t}(i.Service))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.StateService=e.Service=e.RouteService=e.State=e.Route=e.RouterComponent=e.Component=void 0;var t=__webpack_require__(334);Object.defineProperty(e,"Component",{enumerable:!0,get:function(){return t.Component}});var n=__webpack_require__(792);Object.defineProperty(e,"RouterComponent",{enumerable:!0,get:function(){return n.RouterComponent}});var o=__webpack_require__(459);Object.defineProperty(e,"Route",{enumerable:!0,get:function(){return o.Route}});var r=__webpack_require__(469);Object.defineProperty(e,"State",{enumerable:!0,get:function(){return r.State}});var i=__webpack_require__(410);Object.defineProperty(e,"RouteService",{enumerable:!0,get:function(){return i.RouteService}});var a=__webpack_require__(122);Object.defineProperty(e,"Service",{enumerable:!0,get:function(){return a.Service}});var c=__webpack_require__(435);Object.defineProperty(e,"StateService",{enumerable:!0,get:function(){return c.StateService}})})(),__webpack_exports__})()}));