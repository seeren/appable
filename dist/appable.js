!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,(function(){return(()=>{"use strict";var __webpack_modules__={334:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=void 0;var Component=function(){function Component(t,e,n){var o=this;void 0===e&&(e=""),void 0===n&&(n=[]),this.selector=t,this.template=e,this.row=0,this.components=[],this.selector=t,this.template=e,n.forEach((function(t){return o.attach(t)})),window.document.createElement(this.selector)}return Component.prototype.emit=function(t){var e=null;return this[t]&&(e=this[t]()),this.components.forEach((function(n){return!1===e?n.emit(t):e=n.emit(t)})),e},Component.prototype.attach=function(t){var e=t.selector.split("[")[0];if(-1!==this.components.indexOf(t))throw new ReferenceError("Can't attach \""+e+'": is already attached');var n="data-"+this.selector.split(" ").pop().split("[")[0],o=n+'="'+this.row+'"',r=new RegExp("<"+e+"*(.(?!"+n+"))+><").exec(this.template);if(r){var i=r[0].substring(0,r[0].length-2);this.template=this.template.replace(i+">",i+" "+o+">")}else t.emit("onInit"),this.template+="<"+e+" "+o+"></"+e+">";return this.components.push(t),this.row+=1,t.selector=e+"["+o+"]",this},Component.prototype.detach=function(t){var e=this.components.indexOf(t),n=t.selector.split("[");if(-1===e||1===n.length)throw new ReferenceError("Can't detach \""+t.selector+'": is not attached');var o=n[n.length-2].split(" "),r=o[o.length-1],i=""+n[n.length-1].replace("]",""),a=new RegExp("<"+r+"+(.)+"+i+"+><").exec(this.template);return this.template=this.template.replace(a[0]+"/"+r+">",""),this.components.splice(e,1),this.row-=1,t.emit("onDestroy"),t.selector=""+r,this},Component.prototype.update=function(){var _this=this,vars="",element=window.document.querySelector(this.selector);if(!element)return console.info('No update for "'+this.selector+'": not found in the document'),this;var properties=window.Object.getOwnPropertyNames(this).slice(4).concat(window.Object.getOwnPropertyNames(this.constructor.prototype).slice(1));return["onInit","onUpdate","onDestroy","onBack","onPause","onResume"].forEach((function(t){var e=properties.indexOf(t);-1!==e&&properties.splice(e,1)})),properties.forEach((function(t){vars+="var "+t+' = this["'+t+'"]',_this[t]instanceof window.Function&&(vars+=".bind(this)"),vars+=";"})),element.innerHTML=eval(vars+"`"+this.template+"`"),this.updateEvents(element,properties),this.components.forEach((function(t){-1===t.selector.indexOf(_this.selector)&&(t.selector=_this.selector+" "+t.selector),t.update()})),this.onUpdate&&this.onUpdate(element),this},Component.prototype.updateEvents=function(t,e){var n,o=this;return e.forEach((function(e){var r=new window.RegExp('(on[a-zA-Z]{4,16})="'+e+'\\((.*)\\)"',"g"),i=function(t){return o.registerEvent(t,n[1],e,n[2].split(", "))};do{(n=r.exec(t.innerHTML))&&window.document.querySelectorAll(o.selector+" ["+n[0]+"]").forEach(i)}while(n)})),this},Component.prototype.registerEvent=function(htmlElement,type,propertie,args){var _this=this;return htmlElement[type]=function(){var _a,evaluedArguments=[];for(var key in args)evaluedArguments[key]=eval(args[key]);void 0!==(_a=_this)[propertie].apply(_a,evaluedArguments)&&_this.update()},this},Component}();exports.Component=Component},792:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RouterComponent=void 0;var i,a=n(334),c=n(410),s=n(435),p="";e.RouterComponent=new(function(t){function e(){var e=t.call(this,"router")||this,n=window.document.getElementsByTagName("script");return Object.keys(n).some((function(t){var e=n[parseInt(t)];return!(!e.src||-1===e.src.indexOf("dist/appable.js")||(p=e.src.replace("/dist/appable.js","").replace(window.location.origin,""),0))})),e}return r(e,t),e.prototype.add=function(t,e,n){return c.RouteService.post(""+p+t,e,n),this},e.prototype.run=function(t){var e,n=this;window.addEventListener("popstate",(function(t){return n.onPopstate(t)})),window.document.addEventListener("pause",(function(){return n.emit("onPause")})),window.document.addEventListener("resume",(function(){return function(){return n.emit("onResume")}}));var o=c.RouteService.get();try{if(o.forEach((function(t){if(c.RouteService.matchLocation(t))throw t;try{e=c.RouteService.getParam(t)}catch(t){}if(e)throw t})),o.length&&!c.RouteService.hasParam(o[0]))throw o[0]}catch(t){s.StateService.put(t,e),this.attachRoute(t)}return t.attach(this),t.update(),this},e.prototype.back=function(){return window.history.back(),this},e.prototype.navigate=function(t,e){try{c.RouteService.get().forEach((function(e){if(t===e.name)throw e}))}catch(t){if(0<this.components.length){if(this.components[0]===t.component)return;this.detach(this.components[0])}return s.StateService.post(t,e),this.attachRoute(t),void this.update()}throw new ReferenceError('Route "'+t+'" not found')},e.prototype.get=function(t){if(!t)return i;var e=s.StateService.get().param[""+t];if(!e)throw new ReferenceError('There is no param "'+t+'" in the curent state');return e},e.prototype.attachRoute=function(t){if(t.component instanceof window.Function){var e=t.component;t.component=new e}return i=t,this.attach(t.component)},e.prototype.onPopstate=function(t){var e=this;if(!1===this.emit("onBack")){var n=s.StateService.get();return c.RouteService.get().some((function(t){return t.name===n.name&&(s.StateService.post(t,n.param),!0)})),!1}return this.detach(this.components[0]),t.state&&c.RouteService.get().some((function(n){return t.state.name===n.name&&(s.StateService.put(n,t.state.param),e.attachRoute(n),!0)})),this.update(),!0},e.prototype.updateEvents=function(){return this},e}(a.Component))},459:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Route=void 0;e.Route=function(t,e,n){this.path=t,this.name=e,this.component=n}},469:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0;e.State=function(){this.name="",this.param={}}},410:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RouteService=void 0;var i=n(122),a=[];e.RouteService=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.get=function(){return a},e.prototype.post=function(t,e,n){a.forEach((function(n){if(t===n.path)throw new ReferenceError("Can't add route: path \""+t+'" already exists');if(e===n.name)throw new ReferenceError("Can't add route: name \""+e+'" already exists')})),a.push({path:t,name:e,component:n})},e.prototype.matchLocation=function(t){return!this.hasParam(t)&&t.path===window.location.pathname},e.prototype.hasParam=function(t){return-1!==t.path.indexOf(":")},e.prototype.getParam=function(t){var e={},n=window.location.pathname.split("/"),o=t.path.split("/");if(n.length!==o.length)throw new Error("Location path length is different to route path length");return Object.keys(n).forEach((function(t){var r=o[t],i=n[t];if(":"===r[0])e[r.replace(":","")]=i;else if(i!==r)throw new Error('Route part "'+r+'" not found')})),Object.keys(e).forEach((function(t){if(":"+t===e[t])throw new Error('Route slug "'+t+'" is not populated')})),e},e}(i.Service))},122:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Service=void 0;var n=function(){function t(){this.callables=[]}return t.prototype.attach=function(t){return this.callables.push(t),this},t.prototype.detach=function(t){var e=this.callables.indexOf(t);return-1!==e&&this.callables.splice(e,1),this},t.prototype.notify=function(){var t=this;return this.callables.forEach((function(e){return e(t)})),this},t}();e.Service=n},435:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.StateService=void 0;var i=n(122),a=new(n(469).State);e.StateService=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.get=function(){return a},e.prototype.post=function(t,e){return this.history(t,e)},e.prototype.put=function(t,e){return this.history(t,e,!0)},e.prototype.history=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=!1),t.path.split("/").forEach((function(t){if(":"===t[0]&&void 0===e[t.substring(1)])throw new Error('Slug "'+t+'" is missing in param')})),Object.keys(e).forEach((function(e){if(-1===t.path.indexOf(":"+e))throw new Error('Param "'+e+'" is missing in "'+t.path+'"')}));var o=t.path;return a.name=t.name,a.param=e,Object.keys(a.param).forEach((function(t){return o=o.replace(":"+t,""+a.param[t])})),n?(window.history.replaceState(a,t.name,o),this.notify(),!1):(window.history.pushState(a,t.name,o),this.notify(),!0)},e}(i.Service))}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),t.StateService=t.Service=t.RouteService=t.State=t.Route=t.RouterComponent=t.Component=void 0;var e=__webpack_require__(334);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return e.Component}});var n=__webpack_require__(792);Object.defineProperty(t,"RouterComponent",{enumerable:!0,get:function(){return n.RouterComponent}});var o=__webpack_require__(459);Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return o.Route}});var r=__webpack_require__(469);Object.defineProperty(t,"State",{enumerable:!0,get:function(){return r.State}});var i=__webpack_require__(410);Object.defineProperty(t,"RouteService",{enumerable:!0,get:function(){return i.RouteService}});var a=__webpack_require__(122);Object.defineProperty(t,"Service",{enumerable:!0,get:function(){return a.Service}});var c=__webpack_require__(435);Object.defineProperty(t,"StateService",{enumerable:!0,get:function(){return c.StateService}})})(),__webpack_exports__})()}));