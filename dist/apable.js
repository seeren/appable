!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(function(){return(()=>{"use strict";var __webpack_modules__={334:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>Component});var Component=function(){function Component(t,e,n){var o=this;void 0===e&&(e=""),void 0===n&&(n=[]),this.selector=t,this.template=e,this.components=n,this.row=0,this.selector=t,this.template=e,this.components.forEach((function(t){return o.attach(t)})),window.document.createElement(this.selector)}return Component.prototype.attach=function(t){var e=t.selector.split("[")[0];if(-1!==this.components.indexOf(t))throw new ReferenceError("Can't attach \""+e+'": is already attached');var n="data-"+this.selector.split(" ").pop().split("[")[0],o=n+'="'+this.row+'"',r=new RegExp("<"+e+"*(.(?!"+n+"))+><").exec(this.template);if(r){var i=r[0].substring(0,r[0].length-2);this.template=this.template.replace(i+">",i+" "+o+">")}else this.onInit&&this.onInit(),this.components.forEach((function(t){return t.onInit&&t.onInit()})),this.template+="<"+e+" "+o+"></"+e+">";return this.components.push(t),this.row+=1,t.selector=e+"["+o+"]",this},Component.prototype.detach=function(t){var e=this.components.indexOf(t),n=t.selector.split("[");if(-1===e||1===n.length)throw new ReferenceError("Can't detach \""+t.selector+'": is not attached');var o=n[n.length-2].split(" "),r=o[o.length-1],i=""+n[n.length-1].replace("]",""),a=new RegExp("<"+r+"+(.)+"+i+"+><").exec(this.template);return this.onDestroy&&this.onDestroy(),this.components.forEach((function(t){return t.onDestroy&&t.onDestroy()})),this.template=this.template.replace(a[0]+"/"+r+">",""),this.components.splice(e,1),this.row-=1,t.selector=""+r,this},Component.prototype.update=function(){var _this=this,vars="",element=window.document.querySelector(this.selector);if(!element)return console.info('No update for "'+this.selector+'": not found in the document'),this;var properties=window.Object.getOwnPropertyNames(this).slice(4).concat(window.Object.getOwnPropertyNames(this.constructor.prototype).slice(1));return["onInit","onUpdate","onDestroy","onBack","onPause","onResume"].forEach((function(t){var e=properties.indexOf(t);-1!==e&&properties.splice(e,1)})),properties.forEach((function(t){vars+="var "+t+' = this["'+t+'"]',_this[t]instanceof window.Function&&(vars+=".bind(this)"),vars+=";"})),element.innerHTML=eval(vars+"`"+this.template+"`"),this.updateEvents(element,properties),this.components.forEach((function(t){-1===t.selector.indexOf(_this.selector)&&(t.selector=_this.selector+" "+t.selector),t.update()})),this.onUpdate&&this.onUpdate(element),this},Component.prototype.updateEvents=function(t,e){var n,o=this;return e.forEach((function(e){var r=new window.RegExp('(on[a-zA-Z]{4,16})="'+e+'\\((.*)\\)"',"g"),i=function(t){return o.registerEvent(t,n[1],e,n[2].split(", "))};do{(n=r.exec(t.innerHTML))&&window.document.querySelectorAll(o.selector+" ["+n[0]+"]").forEach(i)}while(n)})),this},Component.prototype.registerEvent=function(htmlElement,type,propertie,args){var _this=this;return htmlElement[type]=function(){var _a,evaluedArguments=[];for(var key in args)evaluedArguments[key]=eval(args[key]);void 0!==(_a=_this)[propertie].apply(_a,evaluedArguments)&&_this.update()},this},Component}()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Component:()=>e.w,Route:()=>u,RouteService:()=>r,RouterComponent:()=>p,Service:()=>n,State:()=>i,StateService:()=>s});var t,e=__webpack_require__(334),n=function(){function t(){this.callables=[]}return t.prototype.attach=function(t){return this.callables.push(t),this},t.prototype.detach=function(t){var e=this.callables.indexOf(t);return-1!==e&&this.callables.splice(e,1),this},t.prototype.notify=function(){var t=this;return this.callables.forEach((function(e){return e(t)})),this},t}(),o=(t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),r=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.get=function(){return this.routes},e.prototype.post=function(t,e,n){this.routes.forEach((function(n){if(t===n.path)throw new ReferenceError("Can't add route: path \""+t+'" already exists');if(e===n.name)throw new ReferenceError("Can't add route: name \""+e+'" already exists')})),this.routes.push({path:t,name:e,component:n})},e.prototype.matchLocation=function(t){return!this.hasParam(t)&&t.path===window.location.pathname},e.prototype.hasParam=function(t){return-1!==t.path.indexOf(":")},e.prototype.getParam=function(t){var e={},n=window.location.pathname.split("/"),o=t.path.split("/");if(n.length!==o.length)throw new Error("Location path length is different to route path length");return Object.keys(n).forEach((function(t){var r=o[t],i=n[t];if(":"===r[0])e[r.replace(":","")]=i;else if(i!==r)throw new Error('Route part "'+r+'" not found')})),Object.keys(e).forEach((function(t){if(":"+t===e[t])throw new Error('Route slug "'+t+'" is not populated')})),e},e}(n)),i=function(){},a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=new i,e}return a(e,t),e.prototype.get=function(){return this.state},e.prototype.post=function(t,e){return this.history(t,e)},e.prototype.put=function(t,e){return this.history(t,e,!0)},e.prototype.history=function(t,e,n){var o=this;void 0===e&&(e={}),void 0===n&&(n=!1),t.path.split("/").forEach((function(t){if(":"===t[0]&&void 0===e[t.substring(1)])throw new Error('Slug "'+t+'" is missing in param')})),Object.keys(e).forEach((function(e){if(-1===t.path.indexOf(":"+e))throw new Error('Param "'+e+'" is missing in "'+t.path+'"')}));var r=t.path;return this.state.name=t.name,this.state.param=e,Object.keys(this.state.param).forEach((function(t){return r=r.replace(":"+t,""+o.state.param[t])})),n?(window.history.replaceState(this.state,t.name,r),this.notify(),!1):(window.history.pushState(this.state,t.name,r),this.notify(),!0)},e}(n)),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=new(function(t){function e(){var e=t.call(this,"router")||this,n=window.document.getElementsByTagName("script");return Object.keys(n).some((function(t){var o=n[parseInt(t)];return!(!o.src||-1===o.src.indexOf("dist/index.js")||(e.includePath=o.src.replace("/dist/appable.js","").replace(window.location.origin,""),0))})),e}return c(e,t),e.prototype.add=function(t,e,n){return r.post(""+this.includePath+t,e,n),this},e.prototype.run=function(t){var e,n=this;window.addEventListener("popstate",(function(t){return n.onPopstate(t)})),window.document.addEventListener("pause",(function(){t.onPause&&t.onPause(),n.components.forEach((function(t){return t.onPause&&t.onPause()}))})),window.document.addEventListener("resume",(function(){t.onResume&&t.onResume(),n.components.forEach((function(t){return t.onResume&&t.onResume()}))}));var o=r.get();try{if(o.forEach((function(t){if(r.matchLocation(t))throw t;try{e=r.getParam(t)}catch(t){}if(e)throw t})),o.length&&!r.hasParam(o[0]))throw o[0]}catch(t){s.put(t,e),this.attachRoute(t)}return t.attach(this),t.update(),this},e.prototype.back=function(){return window.history.back(),this},e.prototype.navigate=function(t,e){try{r.get().forEach((function(e){if(t===e.name)throw e}))}catch(t){if(0<this.components.length){if(this.components[0]===t.component)return;this.detach(this.components[0])}return s.post(t,e),this.attach(t),void this.update()}throw new ReferenceError('Route "'+t+'" not found')},e.prototype.get=function(t){if(!t)return this.route;var e=s.get().param[""+t];if(!e)throw new ReferenceError('There is no param "'+t+'" in the curent state');return e},e.prototype.attachRoute=function(t){if(t.component instanceof window.Function){var e=t.component;t.component=new e}return this.route=t,this.attach(t.component)},e.prototype.onPopstate=function(t){var e,n=this;if(this.components.forEach((function(t){t.onBack&&!1===t.onBack()&&(e=!1)})),!1===e){var o=s.get();return r.get().some((function(t){return t.name===o.name&&(s.post(t,o.param),!0)})),!1}return this.detach(this.components[0]),t.state&&r.get().some((function(e){return t.state.name===e.name&&(s.put(e,t.state.param),n.attachRoute(e),!0)})),this.update(),!0},e.prototype.updateEvents=function(){return this},e}(e.w)),u=function(t,e,n){this.path=t,this.name=e,this.component=n}})(),__webpack_exports__})()}));